<!-- Hero Section -->
<div class="tax-slab-page">
  <section class="tax-hero">
    <div class="hero-background">
      <div class="gradient-orb orb-1"></div>
      <div class="gradient-orb orb-2"></div>
      <div class="gradient-orb orb-3"></div>
    </div>

    <div class="hero-content-wrapper">
      <div class="hero-content">
        <div class="hero-badge">
          <mat-icon>account_balance</mat-icon>
          <span>Income Tax Calculator</span>
        </div>

        <h1 class="hero-title">
          Compare Tax Regimes
          <span class="gradient-text">Choose What Saves More</span>
        </h1>

        <p class="hero-subtitle">
          Understand India's income tax slabs for old and new regimes. Make
          informed decisions about your tax planning with our comprehensive
          comparison tool.
        </p>

        <div class="hero-features">
          <div class="feature-chip">
            <mat-icon>compare_arrows</mat-icon>
            <span>Side-by-Side Comparison</span>
          </div>
          <div class="feature-chip">
            <mat-icon>trending_down</mat-icon>
            <span>Tax Optimization</span>
          </div>
          <div class="feature-chip">
            <mat-icon>calendar_today</mat-icon>
            <span>Multi-Year Data</span>
          </div>
        </div>
      </div>

      <div class="hero-visual">
        <div class="visual-decoration decoration-1"></div>
        <div class="visual-decoration decoration-2"></div>

        <div class="hero-image-wrapper">
          <img src="assets/images/tax-illustration.svg" alt="Tax Calculator" class="hero-image" />
        </div>

        <div class="floating-card card-1">
          <mat-icon>savings</mat-icon>
          <div class="card-text">
            <span class="card-label">Save Up To</span>
            <span class="card-value">₹1.5L</span>
          </div>
        </div>

        <div class="floating-card card-2">
          <mat-icon>verified</mat-icon>
          <div class="card-text">
            <span class="card-label">Updated For</span>
            <span class="card-value">FY 2025-26</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content Section -->
  <section class="content-section">
    <div class="content-container">
      <!-- Year Selector Card -->
      <div class="year-selector-card">
        <div class="selector-header">
          <mat-icon>calendar_today</mat-icon>
          <div>
            <h3>Select Financial Year</h3>
            <p>Choose the assessment year for tax slab comparison</p>
          </div>
        </div>

        <div class="year-chips">
          <button mat-button *ngFor="let year of years" [class.selected]="selectedYear === year"
            (click)="selectedYear = year; updateComparisonChart()" class="year-chip">
            <mat-icon>date_range</mat-icon>
            <span>{{ year }}</span>
          </button>
        </div>
      </div>

      <!-- Regime Comparison Cards -->
      <div class="regime-comparison">
        <!-- Old Regime Card -->
        <div class="regime-card old-regime">
          <div class="regime-header">
            <div class="header-icon old-icon">
              <mat-icon>account_balance_wallet</mat-icon>
            </div>
            <div>
              <h3 class="regime-title">Old Tax Regime</h3>
              <p class="regime-subtitle">With Deductions & Exemptions</p>
            </div>
          </div>

          <div class="regime-features">
            <div class="feature-item">
              <mat-icon>check_circle</mat-icon>
              <span>80C Deductions Available</span>
            </div>
            <div class="feature-item">
              <mat-icon>check_circle</mat-icon>
              <span>HRA & LTA Benefits</span>
            </div>
            <div class="feature-item">
              <mat-icon>check_circle</mat-icon>
              <span>Home Loan Interest</span>
            </div>
          </div>

          <div class="slab-table-wrapper">
            <table class="slab-table">
              <thead>
                <tr>
                  <th>
                    <div class="th-content">
                      <mat-icon>currency_rupee</mat-icon>
                      <span>Income Range</span>
                    </div>
                  </th>
                  <th>
                    <div class="th-content">
                      <mat-icon>percent</mat-icon>
                      <span>Tax Rate</span>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="
                    let slab of slabData[selectedYear]['old'];
                    let i = index
                  ">
                  <td class="range-cell">
                    <mat-icon>trending_flat</mat-icon>
                    <span>{{ slab.range }}</span>
                  </td>
                  <td class="rate-cell">
                    <span class="rate-badge" [class]="'rate-' + i">{{
                      slab.rate
                      }}</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- New Regime Card -->
        <div class="regime-card new-regime">
          <div class="regime-header">
            <div class="header-icon new-icon">
              <mat-icon>auto_awesome</mat-icon>
            </div>
            <div>
              <h3 class="regime-title">New Tax Regime</h3>
              <p class="regime-subtitle">Lower Rates, No Deductions</p>
            </div>
          </div>

          <div class="regime-features">
            <div class="feature-item">
              <mat-icon>check_circle</mat-icon>
              <span>Simplified Tax Structure</span>
            </div>
            <div class="feature-item">
              <mat-icon>check_circle</mat-icon>
              <span>Lower Tax Rates</span>
            </div>
            <div class="feature-item">
              <mat-icon>check_circle</mat-icon>
              <span>Default Regime (FY 24-25)</span>
            </div>
          </div>

          <div class="slab-table-wrapper">
            <table class="slab-table">
              <thead>
                <tr>
                  <th>
                    <div class="th-content">
                      <mat-icon>currency_rupee</mat-icon>
                      <span>Income Range</span>
                    </div>
                  </th>
                  <th>
                    <div class="th-content">
                      <mat-icon>percent</mat-icon>
                      <span>Tax Rate</span>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="
                    let slab of slabData[selectedYear]['new'];
                    let i = index
                  ">
                  <td class="range-cell">
                    <mat-icon>trending_flat</mat-icon>
                    <span>{{ slab.range }}</span>
                  </td>
                  <td class="rate-cell">
                    <span class="rate-badge" [class]="'rate-' + i">{{
                      slab.rate
                      }}</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Detailed Comparison Table -->
      <div class="comparison-table-card">
        <div class="card-header">
          <mat-icon>compare</mat-icon>
          <div>
            <h3>Detailed Rate Comparison</h3>
            <p>Side-by-side tax rate analysis for {{ selectedYear }}</p>
          </div>
        </div>

        <div class="comparison-table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Income Range</th>
                <th class="old-regime-col">
                  <div class="col-header">
                    <mat-icon>account_balance_wallet</mat-icon>
                    <span>Old Regime</span>
                  </div>
                </th>
                <th class="new-regime-col">
                  <div class="col-header">
                    <mat-icon>auto_awesome</mat-icon>
                    <span>New Regime</span>
                  </div>
                </th>
                <th class="difference-col">
                  <div class="col-header">
                    <mat-icon>insights</mat-icon>
                    <span>Difference</span>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="
                  let row of comparisonData[selectedYear.replace('–', '-')]
                ">
                <td class="range-cell">{{ row.range }}</td>
                <td class="old-rate-cell">
                  <span class="rate-value">{{ row.oldRate }}</span>
                </td>
                <td class="new-rate-cell">
                  <span class="rate-value">{{ row.newRate }}</span>
                </td>
                <td class="difference-cell">
                  <span class="difference-badge" [class.lower]="
                      getRateDifference(row.oldRate, row.newRate) < 0
                    " [class.higher]="
                      getRateDifference(row.oldRate, row.newRate) > 0
                    " [class.same]="
                      getRateDifference(row.oldRate, row.newRate) === 0
                    ">
                    <mat-icon *ngIf="getRateDifference(row.oldRate, row.newRate) < 0">arrow_downward</mat-icon>
                    <mat-icon *ngIf="getRateDifference(row.oldRate, row.newRate) > 0">arrow_upward</mat-icon>
                    <mat-icon *ngIf="getRateDifference(row.oldRate, row.newRate) === 0">remove</mat-icon>
                    <span>{{
                      formatDifference(row.oldRate, row.newRate)
                      }}</span>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Chart Card -->
      <div class="chart-card">
        <div class="chart-header">
          <div class="header-left">
            <mat-icon>bar_chart</mat-icon>
            <div>
              <h3>Visual Comparison</h3>
              <p>Tax rate distribution across income slabs</p>
            </div>
          </div>
          <button mat-stroked-button color="primary" (click)="exportChart()" class="export-button">
            <mat-icon>download</mat-icon>
            <span>Export Chart</span>
          </button>
        </div>

        <div class="chart-wrapper">
          <canvas baseChart #comparisonChart [data]="comparisonChartData" [options]="comparisonChartOptions"
            [type]="comparisonChartType">
          </canvas>
        </div>

        <div class="chart-legend">
          <div class="legend-item old">
            <div class="legend-color"></div>
            <span>Old Tax Regime</span>
          </div>
          <div class="legend-item new">
            <div class="legend-color"></div>
            <span>New Tax Regime</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Info Section -->
  <section class="info-section">
    <div class="info-container">
      <h2 class="info-title">Key Differences Between Regimes</h2>

      <div class="info-grid">
        <div class="info-card">
          <div class="info-icon">
            <mat-icon>savings</mat-icon>
          </div>
          <h3>Deductions & Exemptions</h3>
          <p>
            Old regime allows various deductions under 80C, 80D, HRA, and LTA.
            New regime offers lower rates but no deductions.
          </p>
          <mat-chip-set>
            <mat-chip>80C - ₹1.5L</mat-chip>
            <mat-chip>HRA</mat-chip>
            <mat-chip>LTA</mat-chip>
          </mat-chip-set>
        </div>

        <div class="info-card">
          <div class="info-icon">
            <mat-icon>speed</mat-icon>
          </div>
          <h3>Simplified Filing</h3>
          <p>
            New tax regime simplifies the tax filing process with fewer forms
            and calculations, saving time and reducing complexity.
          </p>
          <mat-chip-set>
            <mat-chip>Easy Filing</mat-chip>
            <mat-chip>Less Paperwork</mat-chip>
          </mat-chip-set>
        </div>

        <div class="info-card">
          <div class="info-icon">
            <mat-icon>trending_down</mat-icon>
          </div>
          <h3>Lower Tax Rates</h3>
          <p>
            New regime features reduced tax rates across multiple income slabs,
            especially beneficial for higher income groups.
          </p>
          <mat-chip-set>
            <mat-chip>Reduced Rates</mat-chip>
            <mat-chip>Higher Savings</mat-chip>
          </mat-chip-set>
        </div>

        <div class="info-card">
          <div class="info-icon">
            <mat-icon>people</mat-icon>
          </div>
          <h3>Who Benefits More?</h3>
          <p>
            Salaried individuals with fewer investments may benefit from new
            regime. Those with significant deductions should choose old regime.
          </p>
          <mat-chip-set>
            <mat-chip>Compare Both</mat-chip>
            <mat-chip>Choose Wisely</mat-chip>
          </mat-chip-set>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="cta-container">
      <mat-icon class="cta-icon">calculate</mat-icon>
      <h2>Ready to Calculate Your Tax?</h2>
      <p>
        Use our advanced tax calculator to determine which regime saves you more
        money
      </p>
      <button mat-raised-button color="accent" class="cta-button">
        <mat-icon>arrow_forward</mat-icon>
        <span>Calculate Now</span>
      </button>
    </div>
  </section>
</div>