<div class="ppf-calculator-page">
  <!-- Hero Section -->
  <section class="ppf-hero">
    <div class="hero-background">
      <div class="gradient-orb orb-1"></div>
      <div class="gradient-orb orb-2"></div>
      <div class="gradient-orb orb-3"></div>
    </div>
    <div class="hero-content-wrapper">
      <div class="hero-content">
        <div class="hero-badge">
          <mat-icon>account_balance</mat-icon>
          <span>Government Backed</span>
        </div>
        <h1 class="hero-title">
          PPF Calculator
          <span class="gradient-text">Public Provident Fund</span>
        </h1>
        <p class="hero-subtitle">
          Plan your long-term savings with India's most trusted tax-saving
          investment scheme. Calculate returns with complete yearly breakdowns
          and smart projections.
        </p>
        <div class="hero-features">
          <div class="feature-chip">
            <mat-icon>verified</mat-icon>
            <span>100% Safe</span>
          </div>
          <div class="feature-chip">
            <mat-icon>gavel</mat-icon>
            <span>Govt Backed</span>
          </div>
          <div class="feature-chip">
            <mat-icon>money_off</mat-icon>
            <span>Tax Free Returns</span>
          </div>
        </div>
      </div>
      <div class="hero-visual">
        <div class="visual-decoration decoration-1"></div>
        <div class="visual-decoration decoration-2"></div>
        <div class="hero-image-wrapper">
          <img src="assets/images/PPF_Calculator.png" alt="PPF Investment" class="hero-image" />
        </div>
        <div class="floating-card card-1">
          <mat-icon>percent</mat-icon>
          <div class="card-text">
            <span class="card-label">Interest Rate</span>
            <span class="card-value">{{ interestRate() }}%</span>
          </div>
        </div>
        <div class="floating-card card-2">
          <mat-icon>lock</mat-icon>
          <div class="card-text">
            <span class="card-label">Lock-in Period</span>
            <span class="card-value">15 Years</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Calculator Section -->
  <section class="calculator-section">
    <div class="calculator-container">
      <div class="calculator-grid">
        <!-- Left Side: Input Controls -->
        <mat-card class="input-card">
          <div class="card-header">
            <mat-icon class="header-icon">tune</mat-icon>
            <div>
              <h2 class="card-title">Investment Parameters</h2>
              <p class="card-subtitle">Customize your PPF investment details</p>
            </div>
          </div>

          <mat-divider></mat-divider>

          <div class="input-controls">
            <!-- Interest Rate Display -->
            <div class="rate-display">
              <div class="rate-icon">
                <mat-icon>percent</mat-icon>
              </div>
              <div class="rate-content">
                <span class="rate-label">Current PPF Interest Rate</span>
                <span class="rate-value">{{ interestRate() }}% per annum</span>
                <span class="rate-note">*Subject to quarterly revision by Govt of India</span>
              </div>
            </div>

            <!-- Frequency Selection -->
            <div class="control-group">
              <label class="control-label">
                <mat-icon>event_repeat</mat-icon>
                Investment Frequency
              </label>
              <div class="frequency-chips">
                @for (option of frequencyOptions; track option.value) {
                <mat-chip [class.selected]="frequency() === option.value" (click)="onFrequencyChange(option.value)"
                  class="frequency-chip">
                  <mat-icon>{{ option.icon }}</mat-icon>
                  {{ option.label }}
                </mat-chip>
                }
              </div>
            </div>

            <!-- Yearly Investment Amount -->
            <div class="control-group">
              <label class="control-label">
                <mat-icon>currency_rupee</mat-icon>
                Yearly Investment Amount
              </label>
              <mat-form-field appearance="outline" class="amount-field">
                <span matPrefix>₹&nbsp;</span>
                <input matInput type="number" [value]="investmentAmount()"
                  (input)="onAmountChange($event)" min="500" max="150000" />
                <mat-icon matSuffix>account_balance_wallet</mat-icon>
                <mat-hint>Min: ₹500 | Max: ₹1,50,000 per year</mat-hint>
              </mat-form-field>
              <mat-slider min="500" max="150000" step="500" 
                (input)="onAmountChange($event)" class="custom-slider">
                <input matSliderThumb [value]="investmentAmount()" />
              </mat-slider>
              <div class="slider-labels">
                <span>₹500</span>
                <span>₹1,50,000</span>
              </div>
            </div>

            <!-- Investment Period -->
            <div class="control-group">
              <label class="control-label">
                <mat-icon>schedule</mat-icon>
                Investment Period
              </label>
              <div class="value-display">
                <span class="value-number">{{ years() }}</span>
                <span class="value-unit">Years</span>
              </div>
              <mat-slider min="15" max="30" step="1"  (input)="onYearsChange($event)"
                class="custom-slider">
                <input matSliderThumb [value]="years()" />
              </mat-slider>
              <div class="slider-labels">
                <span>15 Years (Min)</span>
                <span>30 Years</span>
              </div>
              <p class="slider-note">
                <mat-icon>info</mat-icon>
                PPF has a minimum lock-in period of 15 years
              </p>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button mat-raised-button color="primary" (click)="calculatePPF()" class="calc-button">
                <mat-icon>calculate</mat-icon>
                Calculate Maturity
              </button>
              <button mat-stroked-button (click)="resetCalculator()" class="reset-button">
                <mat-icon>refresh</mat-icon>
                Reset
              </button>
            </div>
          </div>
        </mat-card>

        <!-- Right Side: Results -->
        <div class="results-section">
          <!-- Summary Cards -->
          <div class="summary-cards">
            <mat-card class="summary-card invested">
              <div class="card-icon">
                <mat-icon>savings</mat-icon>
              </div>
              <div class="card-content">
                <span class="card-label">Total Invested</span>
                <span class="card-value">₹{{ totalInvested() | number : "1.0-0" }}</span>
              </div>
            </mat-card>

            <mat-card class="summary-card interest">
              <div class="card-icon">
                <mat-icon>trending_up</mat-icon>
              </div>
              <div class="card-content">
                <span class="card-label">Interest Earned</span>
                <span class="card-value">₹{{ interestEarned() | number : "1.0-0" }}</span>
              </div>
            </mat-card>

            <mat-card class="summary-card maturity">
              <div class="card-icon">
                <mat-icon>account_balance</mat-icon>
              </div>
              <div class="card-content">
                <span class="card-label">Maturity Amount</span>
                <span class="card-value highlight">₹{{ maturityAmount() | number : "1.0-0" }}</span>
              </div>
            </mat-card>
          </div>

          <!-- Charts -->
          <mat-card class="chart-card">
            <h3 class="chart-title">
              <mat-icon>pie_chart</mat-icon>
              Investment Breakdown
            </h3>
            <div class="chart-wrapper doughnut-wrapper">
              <canvas baseChart [data]="doughnutChartData" [options]="doughnutChartOptions" type="doughnut">
              </canvas>
            </div>
            <div class="chart-stats">
              <div class="stat-item">
                <span class="stat-label">Return %</span>
                <span class="stat-value">{{ returnPercentage | number : "1.2-2" }}%</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Avg Annual Return</span>
                <span class="stat-value">₹{{ averageAnnualReturn | number : "1.0-0" }}</span>
              </div>
            </div>
          </mat-card>

          <mat-card class="chart-card">
            <h3 class="chart-title">
              <mat-icon>show_chart</mat-icon>
              Growth Projection
            </h3>
            <div class="chart-wrapper line-wrapper">
              <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" type="line">
              </canvas>
            </div>
          </mat-card>
        </div>
      </div>

      <!-- Yearly Breakdown Table -->
      @if (yearlyBreakdown.length > 0) {
      <mat-card class="breakdown-card">
        <h3 class="breakdown-title">
          <mat-icon>table_chart</mat-icon>
          Year-wise Account Statement
        </h3>
        <div class="breakdown-table-wrapper">
          <table class="breakdown-table">
            <thead>
              <tr>
                <th>Year</th>
                <th>Opening Balance</th>
                <th>Deposits</th>
                <th>Interest Earned</th>
                <th>Closing Balance</th>
              </tr>
            </thead>
            <tbody>
              @for (item of yearlyBreakdown; track item.year) {
              <tr>
                <td class="year-cell">
                  <mat-icon>calendar_today</mat-icon>
                  Year {{ item.year }}
                </td>
                <td class="amount-cell">
                  ₹{{ item.opening | number : "1.0-0" }}
                </td>
                <td class="deposit-cell">
                  ₹{{ item.deposit | number : "1.0-0" }}
                </td>
                <td class="interest-cell">
                  <span class="interest-badge">+₹{{ item.interest | number : "1.0-0" }}</span>
                </td>
                <td class="closing-cell">
                  ₹{{ item.closing | number : "1.0-0" }}
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </mat-card>
      }
    </div>
  </section>

  <!-- Info Section -->
  <section class="info-section">
    <div class="info-container">
      <h2 class="info-title">Why Invest in PPF?</h2>
      <div class="info-grid">
        <mat-card class="info-card">
          <mat-icon class="info-icon">shield</mat-icon>
          <h3>100% Safe Investment</h3>
          <p>
            Backed by the Government of India, PPF is one of the safest
            investment options with guaranteed returns and no market risk.
          </p>
          <mat-chip-set>
            <mat-chip>Govt Backed</mat-chip>
            <mat-chip>Risk Free</mat-chip>
          </mat-chip-set>
        </mat-card>

        <mat-card class="info-card">
          <mat-icon class="info-icon">money_off</mat-icon>
          <h3>Tax Benefits (EEE)</h3>
          <p>
            Enjoy triple tax exemption - investment deduction under 80C,
            tax-free interest, and tax-free maturity amount.
          </p>
          <mat-chip-set>
            <mat-chip>Section 80C</mat-chip>
            <mat-chip>Tax Free</mat-chip>
          </mat-chip-set>
        </mat-card>

        <mat-card class="info-card">
          <mat-icon class="info-icon">lock_clock</mat-icon>
          <h3>Long-term Wealth Building</h3>
          <p>
            Perfect for retirement planning and long-term goals with 15-year
            lock-in. Can be extended in blocks of 5 years.
          </p>
          <mat-chip-set>
            <mat-chip>15 Year Lock-in</mat-chip>
            <mat-chip>Extendable</mat-chip>
          </mat-chip-set>
        </mat-card>
      </div>
    </div>
  </section>

  <!-- Example Section -->
  <section class="example-section">
    <div class="example-container">
      <div class="example-content">
        <div class="example-badge">
          <mat-icon>calculate</mat-icon>
          <span>Real Example</span>
        </div>
        <h2 class="example-title">See Your PPF Grow</h2>
        <p class="example-description">
          Let's understand how your small annual contributions can create
          substantial wealth over 15 years.
        </p>
        <div class="example-stats">
          <div class="example-stat">
            <mat-icon>currency_rupee</mat-icon>
            <div>
              <span class="stat-label">Annual Investment</span>
              <span class="stat-value">₹1,50,000</span>
            </div>
          </div>
          <div class="example-stat">
            <mat-icon>schedule</mat-icon>
            <div>
              <span class="stat-label">Investment Period</span>
              <span class="stat-value">15 Years</span>
            </div>
          </div>
          <div class="example-stat">
            <mat-icon>percent</mat-icon>
            <div>
              <span class="stat-label">Interest Rate</span>
              <span class="stat-value">7.1% p.a.</span>
            </div>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div class="example-result">
          <div class="result-item">
            <span class="result-label">Total Investment</span>
            <span class="result-value">₹22,50,000</span>
          </div>
          <div class="result-item">
            <span class="result-label">Interest Earned</span>
            <span class="result-value success">₹18,25,000</span>
          </div>
          <div class="result-item highlight">
            <span class="result-label">Maturity Value</span>
            <span class="result-value large">₹40,75,000</span>
          </div>
        </div>
        <p class="example-note">
          <mat-icon>info</mat-icon>
          That's <strong>₹40+ Lakhs</strong> of tax-free wealth in 15 years!
        </p>
      </div>
      <div class="example-visual">
        <img src="assets/images/PPF_illustration.svg" alt="PPF Growth" />
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="cta-container">
      <mat-icon class="cta-icon">account_balance</mat-icon>
      <h2>Start Your PPF Journey Today</h2>
      <p>
        Plan your secure financial future with India's most trusted savings
        scheme
      </p>
      <button mat-raised-button color="primary" class="cta-button" (click)="calculatePPF()">
        <mat-icon>calculate</mat-icon>
        Calculate Your Returns
      </button>
    </div>
  </section>
</div>