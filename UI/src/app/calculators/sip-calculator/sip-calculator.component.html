<div class="sip-calculator-page">
  <!-- BANNER SECTION -->
  <app-banner-section
    title="SIP Calculator"
    gradientText="Systematic Investment Plan"
    subtitle="Calculate returns and visualize your investment growth."
    badge="Investment Planner"
    badgeIcon="trending_up"
    [features]="bannerFeatures"
    [visualCards]="bannerVisualCards"
    illustration="/assets/images/SIP.jpeg">
  </app-banner-section>

  <!-- Calculator Section -->
  <section class="calculator-section">
    <div class="calculator-container">
      <div class="calculator-grid">
        <!-- Left Side: Input Controls -->
        <mat-card class="input-card">
          <div class="card-header">
            <mat-icon class="header-icon">tune</mat-icon>
            <div>
              <h2 class="card-title">Investment Details</h2>
              <p class="card-subtitle">Customize your investment parameters</p>
            </div>
          </div>

          <mat-divider></mat-divider>

          <div class="input-controls">
            <!-- Investment Type -->
            <div class="control-group">
              <label class="control-label">
                <mat-icon aria-hidden="true">account_balance</mat-icon>
                Investment Type
              </label>
              <mat-radio-group [value]="investmentType()" (change)="onInvestmentTypeChange($event.value)"
                class="investment-type-group">
                <mat-radio-button value="monthly" class="type-option">
                  <div class="option-content">
                    <mat-icon aria-hidden="true">calendar_month</mat-icon>
                    <div>
                      <strong>Monthly SIP</strong>
                      <span>Regular investments</span>
                    </div>
                  </div>
                </mat-radio-button>
                <mat-radio-button value="lumpsum" class="type-option">
                  <div class="option-content">
                    <mat-icon aria-hidden="true">payments</mat-icon>
                    <div>
                      <strong>Lumpsum</strong>
                      <span>One-time investment</span>
                    </div>
                  </div>
                </mat-radio-button>
              </mat-radio-group>
            </div>

            <!-- Amount Input -->
            <div class="control-group">
              <label class="control-label">
                <mat-icon aria-hidden="true">currency_rupee</mat-icon>
                {{ investmentType() === "monthly" ? "Monthly" : "Investment" }}
                Amount
              </label>
              <mat-form-field appearance="outline" class="amount-field">
                <span matPrefix>&nbsp;₹&nbsp;</span>
                <input matInput type="number" [value]="amount()" (input)="onAmountChange($event)" min="500"
                  max="1000000" />
                <mat-icon matSuffix>account_balance_wallet</mat-icon>
              </mat-form-field>
              <mat-slider min="500" max="100000" step="500" (input)="onAmountChange($event)" class="custom-slider">
                <input matSliderThumb [value]="amount()" />
              </mat-slider>
              <div class="slider-labels">
                <span>₹500</span>
                <span>₹1,00,000</span>
              </div>
            </div>

            <!-- Years Slider -->
            <div class="control-group">
              <label class="control-label">
                <mat-icon aria-hidden="true">schedule</mat-icon>
                Investment Period
              </label>
              <div class="value-display">
                <span class="value-number">{{ years() }}</span>
                <span class="value-unit">Years</span>
              </div>
              <mat-slider min="1" max="30" step="1" (input)="onYearsChange($event)" class="custom-slider">
                <input matSliderThumb [value]="years()" />
              </mat-slider>
              <div class="slider-labels">
                <span>1 Year</span>
                <span>30 Years</span>
              </div>
            </div>

            <!-- Interest Rate Slider -->
            <div class="control-group">
              <label class="control-label">
                <mat-icon aria-hidden="true">percent</mat-icon>
                Expected Return Rate
              </label>
              <div class="value-display">
                <span class="value-number">{{ interestRate() }}</span>
                <span class="value-unit">% per annum</span>
              </div>
              <mat-slider min="1" max="30" step="0.5" (input)="onInterestRateChange($event)" class="custom-slider">
                <input matSliderThumb [value]="interestRate()" />
              </mat-slider>
              <div class="slider-labels">
                <span>1%</span>
                <span>30%</span>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button mat-raised-button color="primary" (click)="calculate()" class="calc-button">
                <mat-icon aria-hidden="true">calculate</mat-icon>
                Calculate Returns
              </button>
              <button mat-stroked-button (click)="resetCalculator()" class="reset-button">
                <mat-icon aria-hidden="true">refresh</mat-icon>
                Reset
              </button>
            </div>
          </div>
        </mat-card>

        <!-- Right Side: Results -->
        <div class="results-section">
          <!-- Summary Cards -->
          <div class="summary-cards">
            <mat-card class="summary-card invested">
              <div class="card-icon">
                <mat-icon aria-hidden="true">account_balance_wallet</mat-icon>
              </div>
              <div class="card-content">
                <span class="card-label">Total Invested</span>
                <span class="card-value">₹{{ investedAmount() | number : "1.0-0" }}</span>
              </div>
            </mat-card>

            <mat-card class="summary-card returns">
              <div class="card-icon">
                <mat-icon aria-hidden="true">trending_up</mat-icon>
              </div>
              <div class="card-content">
                <span class="card-label">Expected Returns</span>
                <span class="card-value">₹{{ expectedReturn() | number : "1.0-0" }}</span>
              </div>
            </mat-card>

            <mat-card class="summary-card total">
              <div class="card-icon">
                <mat-icon aria-hidden="true">account_balance</mat-icon>
              </div>
              <div class="card-content">
                <span class="card-label">Total Value</span>
                <span class="card-value highlight">₹{{ totalValue() | number : "1.0-0" }}</span>
              </div>
            </mat-card>
          </div>

          <!-- Charts -->
          <mat-card class="chart-card">
            <h3 class="chart-title">
              <mat-icon aria-hidden="true">pie_chart</mat-icon>
              Investment Distribution
            </h3>
            <div class="chart-wrapper doughnut-wrapper">
              <canvas baseChart [data]="doughnutChartData" [options]="doughnutChartOptions" type="doughnut">
              </canvas>
            </div>
            <div class="chart-stats">
              <div class="stat-item">
                <span class="stat-label">Return %</span>
                <span class="stat-value">{{ returnPercentage() | number : "1.2-2" }}%</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Absolute Returns</span>
                <span class="stat-value">₹{{ absoluteReturns() | number : "1.0-0" }}</span>
              </div>
            </div>
          </mat-card>

          <mat-card class="chart-card">
            <h3 class="chart-title">
              <mat-icon aria-hidden="true">show_chart</mat-icon>
              Growth Projection
            </h3>
            <div class="chart-wrapper line-wrapper">
              <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" type="line">
              </canvas>
            </div>
          </mat-card>
        </div>
      </div>

      <!-- Yearly Breakdown Table -->
      @if (yearlyBreakdown.length > 0) {
      <mat-card class="breakdown-card">
        <h3 class="breakdown-title">
          <mat-icon aria-hidden="true">table_chart</mat-icon>
          Year-wise Breakdown
        </h3>
        <div class="breakdown-table-wrapper">
          <table class="breakdown-table">
            <thead>
              <tr>
                <th>Year</th>
                <th>Invested Amount</th>
                <th>Expected Value</th>
                <th>Wealth Gained</th>
              </tr>
            </thead>
            <tbody>
              @for (item of yearlyBreakdown; track item.year) {
              <tr>
                <td class="year-cell">
                  <mat-icon aria-hidden="true">calendar_today</mat-icon>
                  Year {{ item.year }}
                </td>
                <td class="amount-cell">
                  ₹{{ item.invested | number : "1.0-0" }}
                </td>
                <td class="value-cell">₹{{ item.value | number : "1.0-0" }}</td>
                <td class="gain-cell">
                  <span class="gain-badge">+₹{{ item.gain | number : "1.0-0" }}</span>
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </mat-card>
      }
    </div>
  </section>

  <!-- Pro Tips Section -->
  <section class="pro-tips-section">
    <div class="pro-tips-container">
      <div class="section-header">
        <div class="header-badge">
          <mat-icon aria-hidden="true">lightbulb</mat-icon>
          <span>Expert Advice</span>
        </div>
        <h2 class="section-title">Pro Tips for SIP Success</h2>
        <p class="section-subtitle">Master these strategies to maximize your SIP returns and achieve your financial goals faster</p>
      </div>

      <div class="tips-grid">
        <mat-card class="tip-card">
          <div class="tip-number">01</div>
          <div class="tip-icon">
            <mat-icon aria-hidden="true">event_available</mat-icon>
          </div>
          <h3 class="tip-title">Start Early, Stay Invested</h3>
          <p class="tip-description">
            Time is your greatest asset in investing. Starting a SIP early, even with a small amount, 
            can create significantly more wealth than starting late with larger amounts. A 25-year-old 
            investing ₹5,000/month will accumulate more than a 35-year-old investing ₹10,000/month 
            by retirement age.
          </p>
          <div class="tip-highlight">
            <mat-icon aria-hidden="true">insights</mat-icon>
            <span>The first 10 years contribute to 60% of your final corpus</span>
          </div>
        </mat-card>

        <mat-card class="tip-card">
          <div class="tip-number">02</div>
          <div class="tip-icon">
            <mat-icon aria-hidden="true">trending_up</mat-icon>
          </div>
          <h3 class="tip-title">Increase SIP with Salary Hikes</h3>
          <p class="tip-description">
            Implement a Step-Up SIP by increasing your investment by 10-15% annually or with every 
            salary increment. This accelerates wealth creation without straining your budget. If you 
            increase a ₹5,000 monthly SIP by 10% annually, you could accumulate 40-50% more wealth 
            over 20 years.
          </p>
          <div class="tip-highlight">
            <mat-icon aria-hidden="true">auto_awesome</mat-icon>
            <span>Step-Up SIP can boost returns by 40-50% over regular SIP</span>
          </div>
        </mat-card>

        <mat-card class="tip-card">
          <div class="tip-number">03</div>
          <div class="tip-icon">
            <mat-icon aria-hidden="true">donut_large</mat-icon>
          </div>
          <h3 class="tip-title">Diversify Across Asset Classes</h3>
          <p class="tip-description">
            Don't put all eggs in one basket. Allocate your SIPs across large-cap, mid-cap, small-cap, 
            and debt funds based on your risk profile. A balanced portfolio of 60% equity and 40% debt 
            can provide stable returns while managing volatility effectively.
          </p>
          <div class="tip-highlight">
            <mat-icon aria-hidden="true">shield</mat-icon>
            <span>Diversification reduces risk by 30-40% without sacrificing returns</span>
          </div>
        </mat-card>

        <mat-card class="tip-card">
          <div class="tip-number">04</div>
          <div class="tip-icon">
            <mat-icon aria-hidden="true">crisis_alert</mat-icon>
          </div>
          <h3 class="tip-title">Don't Stop During Market Crashes</h3>
          <p class="tip-description">
            Market corrections are opportunities, not threats. Continuing your SIP during bear markets 
            allows you to buy more units at lower prices (rupee cost averaging). Historical data shows 
            that investors who stayed invested during 2008 and 2020 crashes earned significantly higher 
            returns.
          </p>
          <div class="tip-highlight">
            <mat-icon aria-hidden="true">show_chart</mat-icon>
            <span>SIPs started during crashes can generate 2-3x better returns</span>
          </div>
        </mat-card>

        <mat-card class="tip-card">
          <div class="tip-number">05</div>
          <div class="tip-icon">
            <mat-icon aria-hidden="true">track_changes</mat-icon>
          </div>
          <h3 class="tip-title">Review and Rebalance Annually</h3>
          <p class="tip-description">
            Review your SIP portfolio at least once a year. Check if your funds are consistently 
            underperforming their benchmark or peers for 3+ years. Rebalance your asset allocation 
            to maintain your desired risk level. However, avoid making changes based on short-term 
            market movements.
          </p>
          <div class="tip-highlight">
            <mat-icon aria-hidden="true">sync</mat-icon>
            <span>Annual rebalancing can improve returns by 1-2% per year</span>
          </div>
        </mat-card>
      </div>

      <div class="tips-footer">
        <mat-icon aria-hidden="true">info</mat-icon>
        <p>
          <strong>Remember:</strong> These tips are general guidelines. Always consult with a certified 
          financial advisor before making investment decisions. Past performance doesn't guarantee future returns.
        </p>
      </div>
    </div>
  </section>

  <!-- Info Section -->
  <section class="info-section">
    <div class="info-container">
      <h2 class="info-title">Why Invest Through SIP?</h2>
      <div class="info-grid">
        <mat-card class="info-card">
          <mat-icon class="info-icon">auto_graph</mat-icon>
          <h3>Power of Compounding</h3>
          <p>
            Earn returns on your returns. The longer you stay invested, the more
            your money grows exponentially through the magic of compound
            interest.
          </p>
          <mat-chip-set>
            <mat-chip>Long-term Growth</mat-chip>
            <mat-chip>Exponential Returns</mat-chip>
          </mat-chip-set>
        </mat-card>

        <mat-card class="info-card">
          <mat-icon class="info-icon">psychology</mat-icon>
          <h3>Rupee Cost Averaging</h3>
          <p>
            Invest consistently regardless of market conditions. Buy more units
            when prices are low and fewer when high, averaging out your purchase
            cost.
          </p>
          <mat-chip-set>
            <mat-chip>Market Timing</mat-chip>
            <mat-chip>Reduce Risk</mat-chip>
          </mat-chip-set>
        </mat-card>

        <mat-card class="info-card">
          <mat-icon class="info-icon">event_available</mat-icon>
          <h3>Financial Discipline</h3>
          <p>
            Build a habit of regular investing. Automated monthly investments
            ensure you save first and spend later, creating long-term wealth
            systematically.
          </p>
          <mat-chip-set>
            <mat-chip>Automated Saving</mat-chip>
            <mat-chip>Goal Planning</mat-chip>
          </mat-chip-set>
        </mat-card>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="faq-container">
      <div class="section-header">
        <div class="header-badge">
          <mat-icon aria-hidden="true">help_outline</mat-icon>
          <span>Got Questions?</span>
        </div>
        <h2 class="section-title">Frequently Asked Questions</h2>
        <p class="section-subtitle">Everything you need to know about SIP investments in India</p>
      </div>

      <div class="faq-list">
        @for (faq of faqs; track $index) {
          <mat-card class="faq-item" [class.expanded]="faq.expanded">
            <div class="faq-question" (click)="toggleFAQ($index)">
              <div class="question-content">
                <mat-icon class="question-icon">help_center</mat-icon>
                <h3>{{ faq.question }}</h3>
              </div>
              <mat-icon class="expand-icon">
                {{ faq.expanded ? 'expand_less' : 'expand_more' }}
              </mat-icon>
            </div>
            @if (faq.expanded) {
              <div class="faq-answer">
                <mat-divider></mat-divider>
                <p>{{ faq.answer }}</p>
              </div>
            }
          </mat-card>
        }
      </div>

      <div class="faq-footer">
        <mat-icon aria-hidden="true">contact_support</mat-icon>
        <p>
          Still have questions? Our support team is here to help you with your investment journey.
        </p>
      </div>
    </div>
  </section>

  <!-- Example Section -->
  <section class="example-section">
    <div class="example-container">
      <div class="example-content">
        <div class="example-badge">
          <mat-icon aria-hidden="true">calculate</mat-icon>
          <span>Real Example</span>
        </div>
        <h2 class="example-title">See the Magic of SIP</h2>
        <p class="example-description">
          Let's understand with a practical example how small monthly
          investments can create substantial wealth over time.
        </p>
        <div class="example-stats">
          <div class="example-stat">
            <mat-icon aria-hidden="true">currency_rupee</mat-icon>
            <div>
              <span class="stat-label">Monthly Investment</span>
              <span class="stat-value">₹5,000</span>
            </div>
          </div>
          <div class="example-stat">
            <mat-icon aria-hidden="true">schedule</mat-icon>
            <div>
              <span class="stat-label">Investment Period</span>
              <span class="stat-value">10 Years</span>
            </div>
          </div>
          <div class="example-stat">
            <mat-icon aria-hidden="true">percent</mat-icon>
            <div>
              <span class="stat-label">Expected Returns</span>
              <span class="stat-value">12% p.a.</span>
            </div>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div class="example-result">
          <div class="result-item">
            <span class="result-label">Total Invested</span>
            <span class="result-value">₹6,00,000</span>
          </div>
          <div class="result-item">
            <span class="result-label">Wealth Gained</span>
            <span class="result-value success">₹5,61,000</span>
          </div>
          <div class="result-item highlight">
            <span class="result-label">Future Value</span>
            <span class="result-value large">₹11,61,000</span>
          </div>
        </div>
        <p class="example-note">
          <mat-icon aria-hidden="true">info</mat-icon>
          That's nearly <strong>2x returns</strong> on your investment through
          the power of compounding!
        </p>
      </div>
      <div class="example-visual">
        <img src="assets/images/sip_growth_illustration.svg" alt="SIP Growth" loading="lazy" />
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="cta-container">
      <mat-icon class="cta-icon">rocket_launch</mat-icon>
      <h2>Start Your Investment Journey Today</h2>
      <p>
        Use our calculator to plan your SIP investments and watch your wealth
        grow systematically
      </p>
    </div>
  </section>
</div>


